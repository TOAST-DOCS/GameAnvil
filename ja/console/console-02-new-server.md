## Game > GameAnvil > 콘솔 사용 가이드 > 서버 생성하기

## 1. GameAnvil 메뉴와 탭

GameAnvil 콘솔은 크게 상위 메뉴로 큰 기능이 나뉘며 각 메뉴는 하위 탭들로 구성됩니다. 예를 "모니터링", "서버", "운영"은 메뉴입니다. 그리고 모니터링 메뉴는 "대시보드", "서버 현황", "유저 분포", "오토스케일 그룹" 탭으로 구성됩니다.

![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/menu-server-manage-1.png)

마찬가지로 "서버" 메뉴는 다음과 같이 "서버", "오토스케일 그룹", "노드", "배포 파일", "Config" 탭으로 구성됩니다.

![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/menu-server-manage-2.png)

"운영" 메뉴는 "실행", "이력" 탭으로 구성됩니다.

![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/menu-server-manage-3.png)

이 문서는 이러한 메뉴와 탭의 기능을 중심으로 설명합니다.


## 2. 서버 생성을 위한 준비

앞 서 "게임 서버" 혹은 "서버"의 용어에 대해 설명한바 있습니다. 그 의미대로 서버를 생성하기 위해서는 최소한 서버 바이너리와 관련 설정 및 데이터 등이 준비되어야 합니다. 콘솔은 이를 위해 "서버" 메뉴의 "배포 파일"과 "구성(Config)" 탭을 제공합니다. 

사용자가 개발한 게임 서버 바이너리를 "배포 파일" 탭의 기능을 이용하여 업로드할 수 있습니다. 업로드한 바이너리는 아래의 화면과 같이 그 내역이 관리됩니다. 서버를 생성할 때 이러한 배포 파일 중 하나를 선택하여 각 인스턴스로 자동 배포하게 됩니다.  
![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/deploy.png)

배포 파일과 마찬가지로 서버를 구동하기 위한 구성 정보(Config)를 등록해야 합니다. 이를 통해 서버 바이너리를 어떤 설정에 기반하여 구동할 것인지 결정할 수 있습니다. 이러한 구성 파일 또한 다음 화면과 같이 그 내역이 별도로 관리됩니다.

![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/config.png)

구성 정보(Config)를 등록하는 방식은 크게 두 가지입니다. 한 가지 방식은 다음의 그림과 같이 미리 생성된 JSON 파일을 업로드 하는 것입니다. 이 때, 최초로 구성 정보(Config) 파일을 작성하는 경우에는 "Config 템플릿 파일"을 다운로드 받아서 사용할 수 있습니다.

![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/config-new.png)

나머지 한 가지 방식은 아래의 화면과 같이 편집창을 이용하여 직접 구성 정보를 입력하는 것입니다. 등록 방식 외에는 어떠한 차이점도 없으므로 사용자가 원하는 방법을 선택하면 됩니다.

![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/config-edit.png)

참고로 이렇게 등록한 배포 파일과 구성 파일은 그 목록 뿐만 아니라 "이력" 탭을 통해 그 동안의 모든 이력도 조회할 수 있습니다.


## 3. 서버 생성하기

앞서 살펴본 과정을 통해 "배포 파일"과 "Config" 파일이 정상적으로 등록되었다면 이제 서버를 생성할 수 있습니다. 이러한 서버는 실제 서비스 뿐만 아니라 테스트나 개발 등 원하는 용도로 사용 가능합니다.

그럼, 콘솔의 서버 메뉴를 통해 서버를 생성해보도록 하겠습니다. 아래와 같은 화면에서 파란색 "서버 생성" 버튼을 눌러보세요.

![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/create-01.png)


다음과 같이 서버 생성 페이지가 새롭게 열리는 것을 확인할 수 있습니다.

![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/create-new.png)

이 문서의 나머지 부분은 이 서버 생성 페이지의 각 항목에 대해 설명합니다.


## 4. 서버 기본 정보

![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/create-03.png)

* 서버 이름: 현재 구성할 서버를 나타내는 고유한 식별자를 지정합니다. 동일한 식별자를 가진 서버가 여러 대 시작할 경우에는 해당 식별자 뒤에 1부터 1씩 증가하는 고유한 넘버링이 추가됩니다.

* 서버 수량: 여기에서 구성한 서버를 총 몇 대 시작할지 결정합니다. 

* 인스턴스 타입: 서버 생성할 인스턴스 타입을 선택합니다.

* 배포 파일: 서버를 시작하기 위핸 업로드된 서버 바이너리를 선택합니다. 선택하기에 앞서 반드시 최소 하나 이상의 서버 바이너리가 업로드 되어 있어야 합니다. 배포 파일 탭에서 서버 바이너리를 관리할 수 있습니다.

* 태그: 서버 구성에 대해 임의의 태그를 작성해둘 수 있습니다.

* 메모: 해당 서버에 대한 간단한 메모를 작성할 수 있습니다. 이 메모는 서버 구성이나 운영에 영향을 주는 값이 아닙니다.

## 4. 노드 구성

GameAnvil의 노드는 게임 서버의 기능 단위입니다. 개발이 완료된 서버 바이너리는 게임에서 사용할 모든 종류의 노드 구현을 포함하고 있습니다. 이러한 바이너리로 구동되는 서버 프로세스는 설정하기에 따라 임의의 선택된 노드로만 구성할 수 있습니다. 이번에 설명할 노드 구성이 바로 이러한 설정을 진행하는 단계로서 서버 생성에 앞서 등록해둔 구성 정보(Config)을 바탕으로 설정하게 됩니다. 즉, 구성 정보(Config)에 노드 구성 정보도 포함되어 있습니다. 여러 개의 구성 정보(Config)가 등록되어 있을 경우에는 적용할 구성을 목록에서 선택할 수 있습니다. 또한, 구성 정보에 포함된 노드 설정을 노드의 종류 별로 활성화 및 비활성화할 수도 있습니다.

![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/create-04.png)


위의 이미지는 다음과 같이 총 4개의 게임 노드들로 서버를 구성합니다.

| 노드 종류   | 서비스명    | 구동 개수 | 설명                                            |
|---------|---------|-------|-----------------------------------------------|
| GAME    | RPSGame | 4     | 게임 컨텐츠가 구현된 게임 노드이며 각각 ch1 ~ ch4까지의 채널을 담당한다. |



이때, 구성 정보(Config)에 입력한 서비스명은 서버 개발에 사용된 정보를 그대로 등록해야 함에 주의하시기 바랍니다. 서버 구현에 사용된 정보와 다른 값을 입력할 경우 서버가 정상적으로 구동되지 않습니다. 채널값 또한 구성 정보(Config)에 설정해둔 값들이 그대로 노출됩니다.

체크 박스는 서버 생성과 동시에 자동으로 서버를 시작할지 결정합니다. 기본값(생성 즉시 시작)을 사용하길 추천합니다.

## 5. 생성된 서버 확인
서버 구성을 완료한 후 실행을 하면 설정한 수량만큼 서버가 생성됩니다. 생성된 서버는 노란색으로 "TRANSIT" 상태로 시작됩니다. 이 서버는 RUNNING 상태로 진행되기까지 (NHN 클라우드의 인프라 상태에 따라) 수 분(1 ~ 60분 이상)의 시간이 소요될 수 있습니다. 특히, GameAnvil 서비스가 최초의 서버를 구동할 때에는 기본 인프라 설정들을 한꺼번에 진행하는 과정이 수반되므로 좀 더 긴 시간이 소요될 수 있습니다. 사용자는 이 시간 동안 다른 종류의 서버들에 대한 구성을 추가로 진행하거나 다른 메뉴를 사용할 수 있습니다. 

서버가 정상적으로 구동되면 이미지와 같이 "RUNNING" 상태로 바뀝니다. 이렇게 생성된 서버를 클릭하면 다음과 같이 서버 정보를 확인할 수 있습니다. 이 때, 사용자는 서버 제어 명령을 통해 해당 서버를 종료시키고 삭제하거나 재부팅 등을 할 수 있습니다. 혹은 다중 선택 버튼을 통해 한 번에 여러 개의 서버를 동시에 선택하여 명령을 수행할 수도 있습니다.

![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/created.png)

서버 목록에서 임의의 항목을 클릭하면 서버 상세 정보를 확인할 수 있습니다.

![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/detail.png)


## 6. 생성된 노드 정보 확인

앞 서, 우리는 생성된 서버 정보를 확인하는 방법을 살펴 보았습니다. 이와 마찬가지로 생성된 서버를 구성하는 모든 노드 정보 또한 "노드" 탭을 통해 확인할 수 있습니다.

"서버 타입"과 "노드 타입" 그리고 "상태" 등의 체크 박스 뿐만 아니라 "노드 ID" 등의 좀 더 명확한 정보를 기반으로 임의의 노드 정보만 필터링할 수도 있습니다. 
![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/node.png)

## 7. 로드 밸런서

GameAnvil 서비스는 클라이언트의 접속을 효율적으로 처리하기 위해 로드 밸런서를 연동합니다. GameAnvil의 노드 중 클라이언트가 접속할 수 있는 포인트는 게이트웨이 노드와 서포트 노드입니다. 그리고 이들은 모두 여러 대의 인스턴스로 구성될 수 있습니다. 이때, 여러 대의 접속 포인트는 적절한 부하 분산을 위해 로드 밸런서와 연동되어야 합니다. 또한 해당 로드 밸런서는 외부에서 접속 가능한 플로팅IP에 연결되어야 합니다.

![그림](https://static.toastoven.net/prod_gameanvil/images/console/new-server/lb.png)

이러한 일련의 모든 과정은 GameAnvil 서비스가 알아서 처리합니다. 그리고 위의 이미지와 같이 "로드 밸런서 정보" 버튼을 통해 접속 정보를 제공합니다. 해당 정보는 클라이언트의 접속 주소/포트 쌍이므로 불필요하게 외부에 전달되지 않도록 주의할 필요가 있습니다.


